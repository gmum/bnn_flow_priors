BootStrap: docker
From: nvidia/cuda:11.3.1-base-ubuntu20.04

%post
    apt update && apt upgrade -y
    DEBIAN_FRONTEND=noninteractive TZ=Etc/UTC apt -y install tzdata
    apt install -y software-properties-common lsb-release
    apt install -y python3 python3-pip python-is-python3
    apt install -y git
    mkdir /pip-build
    TMPDIR=/pip-build pip --no-input --no-cache-dir install torch==1.12.1 torchvision==0.13.1 torchaudio==0.12.1 -f https://download.pytorch.org/whl/cu113
    TMPDIR=/pip-build pip --no-input --no-cache-dir install scikit-learn==1.1.2 h5py==3.7.0 gpytorch==1.8.1 pyro-ppl==1.8.1 pandas==1.4.3
    TMPDIR=/pip-build pip --no-input --no-cache-dir install tqdm==4.64 seaborn==0.11.2 sacred==0.8.2 pymongo==4.2.0
    rm -rf /pip-build
    apt autoclean -y